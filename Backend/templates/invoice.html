<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Recibo {{ receipt_number }}</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="receipt-container">
      <header class="header">
        <div class="company-logo">
          {% if logo_path %}
          <img src="{{ logo_path }}" alt="Logo de la empresa" class="logo" />
          {% endif %}
        </div>
        <div class="company-details">
          <p class="company-name">{{ company_name }}</p>
          <p>{{ company_address }}</p>
          <p><strong>{{ company_dni }}</strong></p>
          <p>{{ company_contact }}</p>
        </div>
        <div class="receipt-title">RECIBO</div>
      </header>

      <section class="details-section">
        <div class="client-info">
          <h2>CLIENTE</h2>
          <p><strong>{{ client_name }}</strong></p>
          <p>{{ client_dni }}</p>
          <p>{{ client_address }}</p>
          <p>{{ client_phone }}</p>
          <p>{{ client_email }}</p>
        </div>
        <div class="receipt-info">
          <p><strong>RECIBO N°:</strong> {{ receipt_number }}</p>
          <p><strong>FECHA DE PAGO:</strong> {{ payment_date }}</p>
        </div>
      </section>

      <table class="items-table">
        <thead>
          <tr>
            <th>Descripción</th>
            <th class="text-right">Cantidad</th>
            <th class="text-right">Precio Unit.</th>
            <th class="text-right">Total</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{ item_description }}</td>
            <td class="text-right">1</td>
            <td class="text-right">{{ "%.2f €"|format(base_amount) }}</td>
            <td class="text-right">{{ "%.2f €"|format(base_amount) }}</td>
          </tr>
          {% if late_fee > 0 %}
          <tr>
            <td>Recargo por mora</td>
            <td class="text-right">1</td>
            <td class="text-right">{{ "%.2f €"|format(late_fee) }}</td>
            <td class="text-right">{{ "%.2f €"|format(late_fee) }}</td>
          </tr>
          {% endif %}
        </tbody>
        <tfoot>
          <tr class="total-row">
            <td colspan="2">MÉTODO DE PAGO: Efectivo</td>
            <td class="text-right"><strong>TOTAL PAGADO</strong></td>
            <td class="text-right">
              <strong>{{ "%.2f €"|format(total_paid) }}</strong>
            </td>
          </tr>
        </tfoot>
      </table>

      <footer class="footer">
        <p><strong>Gracias por su pago.</strong></p>
        <p>Notas: Factura {{ receipt_number }}. Vence el {{ due_date }}.</p>
      </footer>
    </div>
  </body>
</html>
